<?xml version="1.0" encoding="utf-8"?>
<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:RSBot.ViewModels.Cos"
             mc:Ignorable="d" d:DesignWidth="250" d:DesignHeight="150"
             x:Class="RSBot.Views.Controls.Cos.CosManager"
             x:DataType="vm:CosManagerViewModel">

	<Design.DataContext>
		<vm:CosManagerViewModel/>
	</Design.DataContext>

	<UserControl.Styles>
		<Style Selector="Button.navigation">
			<Setter Property="Background" Value="Transparent"/>
			<Setter Property="Width" Value="30"/>
			<Setter Property="Height" Value="30"/>
			<Setter Property="CornerRadius" Value="15"/>
			<Setter Property="BorderThickness" Value="1"/>
			<Setter Property="BorderBrush" Value="rgba(255, 255, 255, 0.3)"/>
			<Setter Property="VerticalContentAlignment" Value="Center"/>
			<Setter Property="HorizontalContentAlignment" Value="Center"/>
			<Setter Property="Padding" Value="0"/>
			<Setter Property="Transitions">
				<Transitions>
					<BrushTransition Property="Background" Duration="0:0:0.2"/>
					<BrushTransition Property="BorderBrush" Duration="0:0:0.2"/>
				</Transitions>
			</Setter>
		</Style>
		
		<Style Selector="Button.navigation:pointerover">
			<Setter Property="Background" Value="rgba(255, 255, 255, 0.1)"/>
			<Setter Property="BorderBrush" Value="rgba(255, 255, 255, 0.5)"/>
		</Style>

		<Style Selector="Button.navigation:pressed">
			<Setter Property="Background" Value="rgba(255, 255, 255, 0.2)"/>
			<Setter Property="BorderBrush" Value="rgba(255, 255, 255, 0.7)"/>
		</Style>

        <Style Selector="ItemsControl > ContentPresenter">
            <Setter Property="Transitions">
                <Transitions>
                    <TransformOperationsTransition Property="RenderTransform" Duration="0:0:0.3" Easing="CubicEaseOut"/>
                </Transitions>
            </Setter>
        </Style>
	</UserControl.Styles>

	<Grid RowDefinitions="Auto,*" Margin="5">
		<Grid Grid.Row="0" Margin="0 0 0 5">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="Auto"/>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>

			<Button Grid.Column="0"
					Classes="navigation"
					Content="◀"
					Command="{Binding PreviousCommand}"
					IsVisible="{Binding ShowNavigation}"
					IsEnabled="{Binding CanGoPrevious}"
					Margin="0 0 5 0"/>

			<ScrollViewer Grid.Column="1"
						HorizontalScrollBarVisibility="Hidden"
						VerticalScrollBarVisibility="Disabled"
						Offset="{Binding ScrollOffset}">
                <ScrollViewer.Transitions>
                    <Transitions>
                        <VectorTransition Property="Offset" Duration="0:0:0.3" Easing="CubicEaseOut"/>
                    </Transitions>
                </ScrollViewer.Transitions>
				<ItemsControl ItemsSource="{Binding MiniControls}">
					<ItemsControl.ItemsPanel>
						<ItemsPanelTemplate>
							<StackPanel Orientation="Horizontal" Spacing="5"/>
						</ItemsPanelTemplate>
					</ItemsControl.ItemsPanel>
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <ContentControl Content="{Binding}"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
				</ItemsControl>
			</ScrollViewer>

			<Button Grid.Column="2"
					Classes="navigation"
					Content="▶"
					Command="{Binding NextCommand}"
					IsVisible="{Binding ShowNavigation}"
					IsEnabled="{Binding CanGoNext}"
					Margin="5 0 0 0"/>
		</Grid>

		<ItemsControl Grid.Row="1" 
					ItemsSource="{Binding Controls}"
					Margin="0 5">
			<ItemsControl.ItemsPanel>
				<ItemsPanelTemplate>
					<Panel/>
				</ItemsPanelTemplate>
			</ItemsControl.ItemsPanel>
		</ItemsControl>
	</Grid>
</UserControl>
