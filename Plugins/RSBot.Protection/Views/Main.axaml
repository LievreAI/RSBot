<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:RSBot.Protection.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="RSBot.Protection.Views.Main"
             x:DataType="vm:MainViewModel">

    <Design.DataContext>
        <vm:MainViewModel/>
    </Design.DataContext>

    <ScrollViewer>
        <StackPanel Margin="10">
            <!-- HP/MP Protection -->
            <Border Classes="GroupBox" Margin="0,0,0,10">
                <StackPanel>
                    <TextBlock Classes="h2" Text="HP/MP Protection" Margin="0,0,0,10"/>
                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto,Auto,Auto">
                        <!-- HP Protection -->
                        <CheckBox Grid.Row="0" Grid.Column="0" 
                                Content="Use HP potions" 
                                IsChecked="{Binding UseHPPotions}"
                                Margin="0,5"/>
                        
                        <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" Margin="20,5">
                            <TextBlock Text="Use when HP is below" VerticalAlignment="Center"/>
                            <NumericUpDown Value="{Binding HPPotionMin}" 
                                         Minimum="0" Maximum="100"
                                         Width="80" Margin="10,0"/>
                            <TextBlock Text="%" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- MP Protection -->
                        <CheckBox Grid.Row="0" Grid.Column="1" 
                                Content="Use MP potions" 
                                IsChecked="{Binding UseMPPotions}"
                                Margin="0,5"/>
                        
                        <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="20,5">
                            <TextBlock Text="Use when MP is below" VerticalAlignment="Center"/>
                            <NumericUpDown Value="{Binding MPPotionMin}" 
                                         Minimum="0" Maximum="100"
                                         Width="80" Margin="10,0"/>
                            <TextBlock Text="%" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- Vigor HP -->
                        <CheckBox Grid.Row="2" Grid.Column="0" 
                                Content="Use Vigor HP" 
                                IsChecked="{Binding UseVigorHP}"
                                Margin="0,5"/>
                        
                        <StackPanel Grid.Row="3" Grid.Column="0" Orientation="Horizontal" Margin="20,5">
                            <TextBlock Text="Use when HP is below" VerticalAlignment="Center"/>
                            <NumericUpDown Value="{Binding VigorHPMin}" 
                                         Minimum="0" Maximum="100"
                                         Width="80" Margin="10,0"/>
                            <TextBlock Text="%" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- Vigor MP -->
                        <CheckBox Grid.Row="2" Grid.Column="1" 
                                Content="Use Vigor MP" 
                                IsChecked="{Binding UseVigorMP}"
                                Margin="0,5"/>
                        
                        <StackPanel Grid.Row="3" Grid.Column="1" Orientation="Horizontal" Margin="20,5">
                            <TextBlock Text="Use when MP is below" VerticalAlignment="Center"/>
                            <NumericUpDown Value="{Binding VigorMPMin}" 
                                         Minimum="0" Maximum="100"
                                         Width="80" Margin="10,0"/>
                            <TextBlock Text="%" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- HP Skill -->
                        <CheckBox Grid.Row="4" Grid.Column="0" 
                                Content="Use HP skill" 
                                IsChecked="{Binding UseHPSkill}"
                                Margin="0,5"/>
                        
                        <StackPanel Grid.Row="5" Grid.Column="0" Orientation="Horizontal" Margin="20,5">
                            <TextBlock Text="Use when HP is below" VerticalAlignment="Center"/>
                            <NumericUpDown Value="{Binding HPSkillMin}" 
                                         Minimum="0" Maximum="100"
                                         Width="80" Margin="10,0"/>
                            <TextBlock Text="%" VerticalAlignment="Center"/>
                        </StackPanel>

                        <ComboBox Grid.Row="6" Grid.Column="0" 
                                ItemsSource="{Binding HPSkills}"
                                SelectedItem="{Binding SelectedHPSkill}"
                                Margin="20,5"/>

                        <!-- MP Skill -->
                        <CheckBox Grid.Row="4" Grid.Column="1" 
                                Content="Use MP skill" 
                                IsChecked="{Binding UseMPSkill}"
                                Margin="0,5"/>
                        
                        <StackPanel Grid.Row="5" Grid.Column="1" Orientation="Horizontal" Margin="20,5">
                            <TextBlock Text="Use when MP is below" VerticalAlignment="Center"/>
                            <NumericUpDown Value="{Binding MPSkillMin}" 
                                         Minimum="0" Maximum="100"
                                         Width="80" Margin="10,0"/>
                            <TextBlock Text="%" VerticalAlignment="Center"/>
                        </StackPanel>

                        <ComboBox Grid.Row="6" Grid.Column="1" 
                                ItemsSource="{Binding MPSkills}"
                                SelectedItem="{Binding SelectedMPSkill}"
                                Margin="20,5"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Bad Status -->
            <Border Classes="GroupBox" Margin="0,0,0,10">
                <StackPanel>
                    <TextBlock Classes="h2" Text="Bad Status" Margin="0,0,0,10"/>
                    <Grid RowDefinitions="Auto,Auto,Auto">
                        <CheckBox Grid.Row="0" 
                                Content="Use bad status skill" 
                                IsChecked="{Binding UseBadStatusSkill}"
                                Margin="0,5"/>
                        
                        <ComboBox Grid.Row="1" 
                                ItemsSource="{Binding BadStatusSkills}"
                                SelectedItem="{Binding SelectedBadStatusSkill}"
                                Margin="20,5"/>

                        <CheckBox Grid.Row="2" 
                                Content="Use abnormal state potions" 
                                IsChecked="{Binding UseAbnormalStatePotions}"
                                Margin="0,5"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Pet -->
            <Border Classes="GroupBox" Margin="0,0,0,10">
                <StackPanel>
                    <TextBlock Classes="h2" Text="Pet" Margin="0,0,0,10"/>
                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto">
                        <!-- Pet HP -->
                        <CheckBox Grid.Row="0" Grid.Column="0" 
                                Content="Use pet HP" 
                                IsChecked="{Binding UsePetHP}"
                                Margin="0,5"/>
                        
                        <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" Margin="20,5">
                            <TextBlock Text="Use when HP is below" VerticalAlignment="Center"/>
                            <NumericUpDown Value="{Binding PetHPMin}" 
                                         Minimum="0" Maximum="100"
                                         Width="80" Margin="10,0"/>
                            <TextBlock Text="%" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- Pet HGP -->
                        <CheckBox Grid.Row="0" Grid.Column="1" 
                                Content="Use HGP" 
                                IsChecked="{Binding UseHGP}"
                                Margin="0,5"/>
                        
                        <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="20,5">
                            <TextBlock Text="Use when HGP is below" VerticalAlignment="Center"/>
                            <NumericUpDown Value="{Binding PetHGPMin}" 
                                         Minimum="0" Maximum="100"
                                         Width="80" Margin="10,0"/>
                            <TextBlock Text="%" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- Mount HP -->
                        <CheckBox Grid.Row="2" Grid.Column="0" 
                                Content="Use mount HP" 
                                IsChecked="{Binding UseMountHP}"
                                Margin="0,5"/>
                        
                        <StackPanel Grid.Row="3" Grid.Column="0" Orientation="Horizontal" Margin="20,5">
                            <TextBlock Text="Use when HP is below" VerticalAlignment="Center"/>
                            <NumericUpDown Value="{Binding MountHPMin}" 
                                         Minimum="0" Maximum="100"
                                         Width="80" Margin="10,0"/>
                            <TextBlock Text="%" VerticalAlignment="Center"/>
                        </StackPanel>

                        <!-- Universal Pills -->
                        <CheckBox Grid.Row="2" Grid.Column="1" 
                                Content="Use universal pills" 
                                IsChecked="{Binding UseUniversalPills}"
                                Margin="0,5"/>

                        <!-- Pet Controls -->
                        <CheckBox Grid.Row="4" Grid.Column="0" 
                                Content="Auto summon attack pet" 
                                IsChecked="{Binding AutoSummonAttackPet}"
                                Margin="0,5"/>

                        <CheckBox Grid.Row="4" Grid.Column="1" 
                                Content="Revive attack pet" 
                                IsChecked="{Binding ReviveAttackPet}"
                                Margin="0,5"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Back to Town -->
            <Border Classes="GroupBox" Margin="0,0,0,10">
                <StackPanel>
                    <TextBlock Classes="h2" Text="Back to Town" Margin="0,0,0,10"/>
                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto,Auto,Auto,Auto">
                        <CheckBox Grid.Row="0" Grid.Column="0" 
                                Content="When dead" 
                                IsChecked="{Binding BackTownWhenDead}"
                                Margin="0,5"/>

                        <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" Margin="20,5">
                            <TextBlock Text="Dead timeout (seconds)" VerticalAlignment="Center"/>
                            <NumericUpDown Value="{Binding DeadTimeout}" 
                                         Minimum="0"
                                         Width="80" Margin="10,0"/>
                        </StackPanel>

                        <CheckBox Grid.Row="2" Grid.Column="0" 
                                Content="When inventory full" 
                                IsChecked="{Binding BackTownWhenInventoryFull}"
                                Margin="0,5"/>

                        <CheckBox Grid.Row="3" Grid.Column="0" 
                                Content="When no HP potions" 
                                IsChecked="{Binding BackTownWhenNoHPPotions}"
                                Margin="0,5"/>

                        <CheckBox Grid.Row="4" Grid.Column="0" 
                                Content="When no MP potions" 
                                IsChecked="{Binding BackTownWhenNoMPPotions}"
                                Margin="0,5"/>

                        <CheckBox Grid.Row="5" Grid.Column="0" 
                                Content="When level up" 
                                IsChecked="{Binding BackTownWhenLevelUp}"
                                Margin="0,5"/>

                        <CheckBox Grid.Row="0" Grid.Column="1" 
                                Content="When durability low" 
                                IsChecked="{Binding BackTownWhenDurabilityLow}"
                                Margin="0,5"/>

                        <CheckBox Grid.Row="1" Grid.Column="1" 
                                Content="When no arrows" 
                                IsChecked="{Binding BackTownWhenNoArrows}"
                                Margin="0,5"/>

                        <CheckBox Grid.Row="2" Grid.Column="1" 
                                Content="When pet inventory full" 
                                IsChecked="{Binding BackTownWhenPetInventoryFull}"
                                Margin="0,5"/>

                        <CheckBox Grid.Row="3" Grid.Column="1" 
                                Content="Stop bot on return to town" 
                                IsChecked="{Binding StopBotOnReturnToTown}"
                                Margin="0,5"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Stat Points -->
            <Border Classes="GroupBox">
                <StackPanel>
                    <TextBlock Classes="h2" Text="Stat Points" Margin="0,0,0,10"/>
                    <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto">
                        <CheckBox Grid.Row="0" Grid.Column="0" 
                                Content="Increase STR" 
                                IsChecked="{Binding IncreaseSTR}"
                                Margin="0,5"/>

                        <StackPanel Grid.Row="1" Grid.Column="0" Orientation="Horizontal" Margin="20,5">
                            <TextBlock Text="Points" VerticalAlignment="Center"/>
                            <NumericUpDown Value="{Binding STRPoints}" 
                                         Minimum="0"
                                         Width="80" Margin="10,0"/>
                        </StackPanel>

                        <CheckBox Grid.Row="0" Grid.Column="1" 
                                Content="Increase INT" 
                                IsChecked="{Binding IncreaseINT}"
                                Margin="0,5"/>

                        <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal" Margin="20,5">
                            <TextBlock Text="Points" VerticalAlignment="Center"/>
                            <NumericUpDown Value="{Binding INTPoints}" 
                                         Minimum="0"
                                         Width="80" Margin="10,0"/>
                        </StackPanel>

                        <CheckBox Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2"
                                Content="Stop bot when increasing stats" 
                                IsChecked="{Binding StopBotWhenIncreasingStats}"
                                Margin="0,5"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Run Button -->
            <Button Content="{Binding RunButtonText}" 
                    Command="{Binding RunCommand}"
                    HorizontalAlignment="Right"
                    Margin="0,10,0,0"/>
        </StackPanel>
    </ScrollViewer>

    <UserControl.Styles>
        <Style Selector="Border.GroupBox">
            <Setter Property="BorderBrush" Value="{DynamicResource SystemBaseMediumLowColor}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="CornerRadius" Value="4"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="Background" Value="Transparent"/>
        </Style>

        <Style Selector="TextBlock.h2">
            <Setter Property="FontSize" Value="16"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
        </Style>
    </UserControl.Styles>
</UserControl> 