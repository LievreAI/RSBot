<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:RSBot.Party.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="RSBot.Party.Views.MainView">

    <Design.DataContext>
        <vm:MainViewModel />
    </Design.DataContext>

    <Grid RowDefinitions="Auto,*">
        <!-- Settings Panel -->
        <Border Classes="card" Grid.Row="0" Margin="10">
            <StackPanel Spacing="10">
                <TextBlock Classes="h2" Text="Party Settings" />
                <Grid ColumnDefinitions="*,*" RowDefinitions="Auto,Auto,Auto" Margin="0,10">
                    <CheckBox Grid.Row="0" Grid.Column="0" 
                              Content="Allow Invitations"
                              IsChecked="{Binding AllowInvitations}" />
                    <CheckBox Grid.Row="0" Grid.Column="1" 
                              Content="Auto-share EXP"
                              IsChecked="{Binding AutoShareExperience}" />
                    <CheckBox Grid.Row="1" Grid.Column="0" 
                              Content="Auto-share Items"
                              IsChecked="{Binding AutoShareItems}" />
                    <CheckBox Grid.Row="1" Grid.Column="1" 
                              Content="Auto-share Gold"
                              IsChecked="{Binding AutoShareGold}" />
                </Grid>
            </StackPanel>
        </Border>

        <!-- Party Management -->
        <TabControl Grid.Row="1" Margin="10">
            <TabItem Header="Party Members">
                <Grid RowDefinitions="Auto,*,Auto">
                    <TextBlock Classes="h2" Text="Current Party Members" Grid.Row="0" Margin="0,0,0,10" />
                    <DataGrid Grid.Row="1" 
                              ItemsSource="{Binding PartyMembers}"
                              AutoGenerateColumns="False"
                              IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Name" Binding="{Binding Name}" />
                            <DataGridTextColumn Header="Level" Binding="{Binding Level}" />
                            <DataGridTextColumn Header="Job" Binding="{Binding Job}" />
                            <DataGridTextColumn Header="HP %" Binding="{Binding HpPercentage}" />
                            <DataGridTextColumn Header="MP %" Binding="{Binding MpPercentage}" />
                        </DataGrid.Columns>
                    </DataGrid>
                    <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0" Spacing="10">
                        <Button Content="Leave Party" Command="{Binding LeavePartyCommand}" />
                        <Button Content="Join Party" Command="{Binding JoinPartyCommand}" />
                    </StackPanel>
                </Grid>
            </TabItem>

            <TabItem Header="Party Matching">
                <Grid RowDefinitions="Auto,*">
                    <Border Classes="card" Grid.Row="0">
                        <StackPanel Spacing="10">
                            <TextBlock Classes="h2" Text="Party Matching Settings" />
                            <Grid ColumnDefinitions="Auto,*,Auto,*" RowDefinitions="Auto,Auto" Margin="0,10">
                                <TextBlock Grid.Row="0" Grid.Column="0" Text="Min Level:" VerticalAlignment="Center" Margin="0,0,10,0" />
                                <NumericUpDown Grid.Row="0" Grid.Column="1" Value="{Binding MinLevel}" Minimum="1" Maximum="255" />
                                <TextBlock Grid.Row="0" Grid.Column="2" Text="Max Level:" VerticalAlignment="Center" Margin="10,0" />
                                <NumericUpDown Grid.Row="0" Grid.Column="3" Value="{Binding MaxLevel}" Minimum="1" Maximum="255" />
                            </Grid>
                            <Grid ColumnDefinitions="*,*,*,*">
                                <CheckBox Grid.Column="0" Content="Hunting" IsChecked="{Binding IsHunting}" />
                                <CheckBox Grid.Column="1" Content="Quest" IsChecked="{Binding IsQuest}" />
                                <CheckBox Grid.Column="2" Content="Trade" IsChecked="{Binding IsTrade}" />
                                <CheckBox Grid.Column="3" Content="Thief" IsChecked="{Binding IsThief}" />
                            </Grid>
                            <Grid ColumnDefinitions="*,*">
                                <CheckBox Grid.Column="0" Content="Auto Reform" IsChecked="{Binding AutoReform}" />
                                <CheckBox Grid.Column="1" Content="Auto Accept" IsChecked="{Binding AutoAccept}" />
                            </Grid>
                        </StackPanel>
                    </Border>

                    <DataGrid Grid.Row="1" Margin="0,10,0,0"
                              ItemsSource="{Binding MatchingList}"
                              AutoGenerateColumns="False"
                              IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Leader" Binding="{Binding Leader}" />
                            <DataGridTextColumn Header="Purpose" Binding="{Binding Purpose}" />
                            <DataGridTextColumn Header="Level Range" Binding="{Binding LevelRange}" />
                            <DataGridTextColumn Header="Members" Binding="{Binding MemberCount}" />
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </TabItem>
        </TabControl>
    </Grid>
</UserControl> 